import React, { useState } from 'react';
import { CheckCircle, Circle, ChevronDown, ChevronUp } from 'lucide-react';

const NodeJSRoadmap = () => {
  const [expandedSections, setExpandedSections] = useState({});
  const [completedItems, setCompletedItems] = useState(() => {
    const saved = localStorage.getItem('nodejs-progress');
    return saved ? JSON.parse(saved) : {};
  });

  const roadmapData = [
    {
      phase: "‡ßß‡¶Æ ‡¶ß‡¶æ‡¶™: Node.js ‡¶è‡¶∞ ‡¶Æ‡ßÇ‡¶≤ ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º",
      duration: "‡ßß-‡ß® ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π",
      topics: [
        { title: "Node.js ‡¶ï‡ßÄ ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßá‡¶®?", desc: "Server-side JavaScript, V8 engine, event-driven architecture" },
        { title: "Installation ‡¶è‡¶¨‡¶Ç Setup", desc: "Node.js ‡¶ì npm install ‡¶ï‡¶∞‡¶æ, ‡¶™‡ßç‡¶∞‡¶•‡¶Æ program ‡¶ö‡¶æ‡¶≤‡¶æ‡¶®‡ßã" },
        { title: "Node.js REPL", desc: "Interactive shell ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ" },
        { title: "Modules ‡¶è‡¶¨‡¶Ç require()", desc: "Built-in modules, custom modules ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ" },
        { title: "NPM Basics", desc: "Package install, package.json, dependencies" }
      ]
    },
    {
      phase: "‡ß®‡¶Ø‡¶º ‡¶ß‡¶æ‡¶™: Core Concepts",
      duration: "‡ß®-‡ß© ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π",
      topics: [
        { title: "File System (fs)", desc: "File read/write, async vs sync operations" },
        { title: "Events ‡¶è‡¶¨‡¶Ç EventEmitter", desc: "Custom events ‡¶§‡ßà‡¶∞‡¶ø ‡¶è‡¶¨‡¶Ç handle ‡¶ï‡¶∞‡¶æ" },
        { title: "Streams", desc: "Readable, Writable, Duplex, Transform streams" },
        { title: "Buffers", desc: "Binary data ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶æ" },
        { title: "Asynchronous Programming", desc: "Callbacks, Promises, Async/Await" }
      ]
    },
    {
      phase: "‡ß©‡¶Ø‡¶º ‡¶ß‡¶æ‡¶™: Web Development",
      duration: "‡ß©-‡ß™ ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π",
      topics: [
        { title: "HTTP Module", desc: "Basic server ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ" },
        { title: "Express.js Framework", desc: "Routing, middleware, req/res handling" },
        { title: "RESTful API", desc: "CRUD operations, HTTP methods" },
        { title: "Template Engines", desc: "EJS, Pug ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ" },
        { title: "Static Files Serving", desc: "CSS, JS, images serve ‡¶ï‡¶∞‡¶æ" }
      ]
    },
    {
      phase: "‡ß™‡¶∞‡ßç‡¶• ‡¶ß‡¶æ‡¶™: Database Integration",
      duration: "‡ß®-‡ß© ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π",
      topics: [
        { title: "MongoDB ‡¶è‡¶¨‡¶Ç Mongoose", desc: "NoSQL database, schema, models" },
        { title: "PostgreSQL/MySQL", desc: "SQL database connection" },
        { title: "CRUD Operations", desc: "Database ‡¶è data create, read, update, delete" },
        { title: "Database Design", desc: "Relations, indexing, optimization" }
      ]
    },
    {
      phase: "‡ß´‡¶Æ ‡¶ß‡¶æ‡¶™: Authentication & Security",
      duration: "‡ß® ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π",
      topics: [
        { title: "JWT (JSON Web Tokens)", desc: "Token-based authentication" },
        { title: "Bcrypt", desc: "Password hashing" },
        { title: "Session Management", desc: "Express-session ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ" },
        { title: "CORS", desc: "Cross-origin requests handle ‡¶ï‡¶∞‡¶æ" },
        { title: "Environment Variables", desc: ".env file ‡¶è‡¶¨‡¶Ç dotenv package" }
      ]
    },
    {
      phase: "‡ß¨‡¶∑‡ßç‡¶† ‡¶ß‡¶æ‡¶™: Advanced Topics",
      duration: "‡ß©-‡ß™ ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π",
      topics: [
        { title: "Error Handling", desc: "Try-catch, error middleware" },
        { title: "Testing", desc: "Jest, Mocha, Chai ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá testing" },
        { title: "WebSockets", desc: "Real-time communication (Socket.io)" },
        { title: "File Uploads", desc: "Multer ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ" },
        { title: "Email Sending", desc: "Nodemailer" },
        { title: "Task Scheduling", desc: "Cron jobs" }
      ]
    },
    {
      phase: "‡ß≠‡¶Æ ‡¶ß‡¶æ‡¶™: Deployment & DevOps",
      duration: "‡ßß-‡ß® ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π",
      topics: [
        { title: "Process Management", desc: "PM2 ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ" },
        { title: "Deployment", desc: "Heroku, Vercel, AWS, DigitalOcean" },
        { title: "Docker Basics", desc: "Containerization" },
        { title: "CI/CD", desc: "GitHub Actions" },
        { title: "Monitoring", desc: "Logging ‡¶è‡¶¨‡¶Ç debugging" }
      ]
    }
  ];

  const projects = [
    { name: "‡ßß. Simple CLI Tool", desc: "File organizer ‡¶¨‡¶æ todo app" },
    { name: "‡ß®. REST API", desc: "Blog API with CRUD operations" },
    { name: "‡ß©. Authentication System", desc: "User signup/login with JWT" },
    { name: "‡ß™. Real-time Chat App", desc: "WebSocket ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá" },
    { name: "‡ß´. E-commerce Backend", desc: "Products, cart, orders management" }
  ];

  const toggleSection = (index) => {
    setExpandedSections(prev => ({
      ...prev,
      [index]: !prev[index]
    }));
  };

  const toggleComplete = (phaseIndex, topicIndex) => {
    const key = `${phaseIndex}-${topicIndex}`;
    setCompletedItems(prev => ({
      ...prev,
      [key]: !prev[key]
    }));
  };

  return (
    <div className="max-w-4xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen">
      <div className="bg-white rounded-lg shadow-lg p-8 mb-6">
        <h1 className="text-3xl font-bold text-indigo-900 mb-2">Node.js ‡¶∂‡ßá‡¶ñ‡¶æ‡¶∞ Complete Roadmap</h1>
        <p className="text-gray-600 mb-4">JavaScript ‡¶ú‡¶æ‡¶®‡¶æ ‡¶•‡ßá‡¶ï‡ßá Node.js Master ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§</p>
        <div className="bg-indigo-100 border-l-4 border-indigo-600 p-4 rounded">
          <p className="text-sm text-indigo-900">
            <strong>‡¶Æ‡ßã‡¶ü ‡¶∏‡¶Æ‡¶Ø‡¶º:</strong> ‡ßß‡ß™-‡ß®‡ß¶ ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π (‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡ßß-‡ß® ‡¶ò‡¶®‡ßç‡¶ü‡¶æ practice ‡¶ï‡¶∞‡¶≤‡ßá)
          </p>
        </div>
      </div>

      {roadmapData.map((phase, phaseIndex) => (
        <div key={phaseIndex} className="bg-white rounded-lg shadow-md mb-4 overflow-hidden">
          <div 
            className="bg-indigo-600 text-white p-4 cursor-pointer flex justify-between items-center hover:bg-indigo-700 transition"
            onClick={() => toggleSection(phaseIndex)}
          >
            <div>
              <h2 className="text-xl font-semibold">{phase.phase}</h2>
              <p className="text-indigo-200 text-sm">‡¶∏‡¶Æ‡¶Ø‡¶º: {phase.duration}</p>
            </div>
            {expandedSections[phaseIndex] ? <ChevronUp /> : <ChevronDown />}
          </div>
          
          {expandedSections[phaseIndex] && (
            <div className="p-4">
              {phase.topics.map((topic, topicIndex) => {
                const key = `${phaseIndex}-${topicIndex}`;
                const isComplete = completedItems[key];
                
                return (
                  <div 
                    key={topicIndex}
                    className="border-l-2 border-gray-200 pl-4 py-3 ml-2 hover:border-indigo-400 transition cursor-pointer"
                    onClick={() => toggleComplete(phaseIndex, topicIndex)}
                  >
                    <div className="flex items-start">
                      <div className="mt-1 mr-3">
                        {isComplete ? (
                          <CheckCircle className="text-green-500" size={20} />
                        ) : (
                          <Circle className="text-gray-300" size={20} />
                        )}
                      </div>
                      <div className={isComplete ? 'opacity-60' : ''}>
                        <h3 className="font-semibold text-gray-800">{topic.title}</h3>
                        <p className="text-sm text-gray-600">{topic.desc}</p>
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
          )}
        </div>
      ))}

      <div className="bg-white rounded-lg shadow-lg p-6 mt-6">
        <h2 className="text-2xl font-bold text-indigo-900 mb-4">Practice Projects</h2>
        <div className="space-y-3">
          {projects.map((project, index) => (
            <div key={index} className="border-l-4 border-green-500 pl-4 py-2">
              <h3 className="font-semibold text-gray-800">{project.name}</h3>
              <p className="text-sm text-gray-600">{project.desc}</p>
            </div>
          ))}
        </div>
      </div>

      <div className="bg-amber-50 border border-amber-200 rounded-lg p-6 mt-6">
        <h3 className="text-lg font-bold text-amber-900 mb-3">üìö ‡¶∏‡ßá‡¶∞‡¶æ Resources:</h3>
        <ul className="space-y-2 text-sm text-amber-900">
          <li>‚Ä¢ <strong>Official Docs:</strong> nodejs.org/docs</li>
          <li>‚Ä¢ <strong>YouTube:</strong> Traversy Media, The Net Ninja (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶Ø‡¶º Anisul Islam)</li>
          <li>‚Ä¢ <strong>Practice:</strong> freeCodeCamp, Codecademy</li>
          <li>‚Ä¢ <strong>Community:</strong> Stack Overflow, Reddit r/node</li>
        </ul>
      </div>

      <div className="bg-blue-50 border border-blue-200 rounded-lg p-6 mt-6">
        <h3 className="text-lg font-bold text-blue-900 mb-3">üí° Tips:</h3>
        <ul className="space-y-2 text-sm text-blue-900">
          <li>‚úì ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶æ concept ‡¶π‡¶æ‡¶§‡ßá-‡¶ï‡¶≤‡¶Æ‡ßá practice ‡¶ï‡¶∞‡ßÅ‡¶®</li>
          <li>‚úì ‡¶õ‡ßã‡¶ü ‡¶õ‡ßã‡¶ü project ‡¶¨‡¶æ‡¶®‡¶æ‡¶®</li>
          <li>‚úì GitHub ‡¶è code push ‡¶ï‡¶∞‡ßÅ‡¶®</li>
          <li>‚úì Documentation ‡¶™‡¶°‡¶º‡¶æ‡¶∞ ‡¶Ö‡¶≠‡ßç‡¶Ø‡¶æ‡¶∏ ‡¶ï‡¶∞‡ßÅ‡¶®</li>
          <li>‚úì Community ‡¶§‡ßá active ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®</li>
        </ul>
      </div>
    </div>
  );
};

export default NodeJSRoadmap;